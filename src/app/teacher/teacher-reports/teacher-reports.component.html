<div class="page-title">
  <div class="title_left">
    <h3 *ngIf="!displayViewReport"  style="margin-bottom: 80px;">Liste des rapports</h3>
  </div>


<div class="clearfix"></div>
<!-- CHAMPS RECHERCHE -->
<div class="row" *ngIf="!displayViewReport">

  <!-- champ de recherche par FORMATION -->
  <div class="col-md-3 col-xs-5 form-group top_search filterStyle" id="search_formation">
    <div class="">
      Filtrer par formations<br />
      <select class="form-control input-sm" [(ngModel)]="selectedFormation" (change)="filterReports()">
        <option value="0" >Toute les formations</option>
        <option value="{{f.id}}" *ngFor="let f of formations">{{ f.name }}</option>
      </select>
    </div>
  </div>

  <!-- champ de recherche par AUTEUR t -->
  <div class="col-md-3 col-xs-5 form-group top_search filterStyle" id="search_author">
    <div class="">
      Filtrer par étudiants<br />
      <select class="form-control input-sm" [(ngModel)]="selectedStudent" (change)="filterReports()">
        <option value="0">Tous les étudiants</option>
        <option value="{{ student.studentId }}" *ngFor="let student of students">{{ student.studentName }}</option>
      </select>
    </div>
  </div>

  <!-- champ recherche par date picker -->
  <div class="col-md-3 col-xs-6 form-group top_search filterStyle" id="search_date">
    <div class="">
      Filtrer par date<br />
      <input type="date" class="form-control" [(ngModel)]="selectedDate" (change)="filterReports()" data-inputmask="'mask': 'jj/mm/aaaa'">
    </div>
  </div>

</div>
<!-- Liste des Rapports -->
<div class="row" *ngIf="!displayViewReport">
  <div class="col-md-12 col-xd-12">
    <!-- Tableaux des Rapports -->
    <table class="table table-borderless space" style="color: #999">
      <thead class="">
        <tr class="tablecolor rad text-row">
          <th scope="col"></th>
          <th scope="col">#</th>
          <th scope="col">Auteur</th>
          <th scope="col">Titre du rapport</th>
          <th scope="col">Notation</th>
          <th scope="col">Date du rapport</th>
          <th scope="col">Dernière modification</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of dataReport" class="shadow bg-white rad text-row" (click)="viewReport(item)" style="cursor: pointer;">
          <td></td>
          <td scope="row" width="40">{{ item.report_id }}</td>
          <td>
            <img src="{{ environment.appImageUrl }}{{ item.studentAvatar }}" class="img-circle pull-left" width="100%">
            <div class="pull-left" style="margin: 13px 0 0 10px;">
              <span class="alignleft">{{ item.studentLastname }}</span><br/>
              <span class="alignleft">{{ item.studentFirstname }}</span>
            </div>
          </td>
          <td>{{ item.report_title }}</td>
          <td>
            <div class="emoji">
              <i class="far fa-smile-wink" style="font-size: 34px; margin: 0 5px 0 0;" [class.green]="item.report_rate == 5" ></i>
              <i class="far fa-smile" style="font-size: 34px; margin: 0 5px 0 0;" [class.blue]="item.report_rate == 4"></i>
              <i class="far fa-frown" style="font-size: 34px; margin: 0 5px 0 0;" [class.yellow]="item.report_rate == 3"></i>
              <i class="far fa-sad-cry" style="font-size: 34px; margin: 0 5px 0 0;" [class.purple]="item.report_rate == 2"></i>
              <i class="far fa-angry" style="font-size: 34px; margin: 0 5px 0 0;" [class.red]="item.report_rate == 1"></i>
            </div>
          </td>
          <td>
            <span class="alignleft">{{ item.report_date  | date:format }}</span>
          </td>
          <td>{{ item.report_last_edit_date | date:format }}</td>
          <td>
            <button type="button" class="rounded btn bg-green icon no-border"><i class="glyphicon glyphicon glyphicon-eye-open"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
